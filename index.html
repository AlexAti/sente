<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>Sente 0.9.0 API documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Sente 0.9.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="taoensso.sente.html"><span>taoensso.sente</span></a></li><li><a href="taoensso.sente.utils.html"><span>taoensso.sente.utils</span></a></li></ul></div><div class="namespace-index" id="content"><h2>Sente 0.9.0 API documentation</h2><div class="doc">Clojure channel sockets library</div><div class="namespace"><h3><a href="taoensso.sente.html"><span>taoensso.sente</span></a></h3><pre class="doc">Channel sockets. Otherwise known as The Shiz.

    Protocol  | client&gt;server | client&gt;server + ack/reply | server&gt;user[1] push
  * WebSockets:       ✓              [2]                          ✓  ; [3]
  * Ajax:            [4]              ✓                          [5] ; [3]

  [1] ALL of a user's connected clients (browser tabs, devices, etc.).
      Note that user &gt; session &gt; client &gt; connection for consistency over time
      + multiple devices.
  [2] Emulate with cb-uuid wrapping.
  [3] By uid only (=&gt; logged-in users only).
  [4] Emulate with dummy-cb wrapping.
  [5] Emulate with long-polling against uid (=&gt; logged-in users only).

Abbreviations:
  * chsk  - channel socket.
  * hk-ch - Http-kit Channel.
  * uid   - User id. An application-specified identifier unique to each user
            and sessionized under `:uid` key to enable server&gt;user push.
            May have semantic meaning (e.g. username, email address), or not
            (e.g. random uuid) - app's discresion.
  * cb    - callback.
  * tout  - timeout.
  * ws    - WebSocket/s.

Special messages (implementation detail):
  * cb replies: :chsk/closed, :chsk/timeout, :chsk/error.
  * client-side events:
      [:chsk/handshake &lt;#{:ws :ajax}&gt;],
      [:chsk/ping      &lt;#{:ws :ajax}&gt;], ; Though no :ajax ping
      [:chsk/state [&lt;#{:open :first-open :closed}&gt; &lt;#{:ws :ajax}]],
      [:chsk/recv  &lt;[buffered-evs]&gt;]. ; server&gt;user push

  * server-side events:
     [:chsk/bad-edn &lt;edn&gt;],
     [:chsk/bad-event &lt;chsk-event&gt;],
     [:chsk/uidport-open  &lt;#{:ws :ajax}&gt;],
     [:chsk/uidport-close &lt;#{:ws :ajax}&gt;].

  * event wrappers: {:chsk/clj &lt;clj&gt; :chsk/dummy-cb? true} (for [2]),
                    {:chsk/clj &lt;clj&gt; :chsk/cb-uuid &lt;uuid&gt;} (for [4]).

Notable implementation details:
  * Edn is used as a flexible+convenient transfer format, but can be seen as
    an implementation detail. Users may apply additional string encoding (e.g.
    JSON) at will. (This would incur a cost, but it'd be negligable compared
    to even the fastest network transfer times).
  * No server&gt;client (with/without cb) mechanism is provided since:
    - server&gt;user is what people actually want 90% of the time, and is a
      preferable design pattern in general IMO.
    - server&gt;client could be (somewhat inefficiently) simulated with server&gt;user.
  * core.async is used liberally where brute-force core.async allows for
    significant implementation simplifications. We lean on core.async's strong
    efficiency here.

General-use notes:
  * Single HTTP req+session persists over entire chsk session but cannot
    modify sessions! Use standard a/sync HTTP Ring req/resp for logins, etc.
  * Easy to wrap standard HTTP Ring resps for transport over chsks. Prefer
    this approach to modifying handlers (better portability).</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="taoensso.sente.html#var-assert-event"><span>assert-event</span></a></li><li><a href="taoensso.sente.html#var-cb-success%3F"><span>cb-success?</span></a></li><li><a href="taoensso.sente.html#var-event-msg%3F"><span>event-msg?</span></a></li><li><a href="taoensso.sente.html#var-event%3F"><span>event?</span></a></li><li><a href="taoensso.sente.html#var-make-channel-socket%21"><span>make-channel-socket!</span></a></li><li><a href="taoensso.sente.html#var-start-chsk-router-loop%21"><span>start-chsk-router-loop!</span></a></li></ul></div></div><div class="namespace"><h3><a href="taoensso.sente.utils.html"><span>taoensso.sente.utils</span></a></h3><pre class="doc"></pre><div class="index"><p>Public variables and functions:</p><ul></ul></div></div></div></body></html>